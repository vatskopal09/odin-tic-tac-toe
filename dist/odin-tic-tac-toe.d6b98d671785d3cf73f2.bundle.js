!function(){"use strict";var t,n={init:function(){t={}},add:function(n,e){var r;"string"==typeof n&&"function"==typeof e&&(t[n]=null!==(r=t[n])&&void 0!==r?r:[],t[n].push(e))},remove:function(n,e){if("string"==typeof n){var r=t[n];if(Array.isArray(r)){var i=r.indexOf(e);i>-1&&(r.splice(i,1),r.length<1&&delete t[n])}}},emit:function(n){for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];if("string"==typeof n){var o=t[n];Array.isArray(o)&&o.forEach((function(t){return t.apply(void 0,r)}))}},START_EVENT_NAME:"start",STARTED_EVENT_NAME:"started",HARD_GAME_EVENT_NAME:"hard",MEDIUM_GAME_EVENT_NAME:"medium",EASY_GAME_EVENT_NAME:"easy",ONE_PLAYER_GAME_EVENT_NAME:"oneplayergame",WIN_EVENT_NAME:"win",MARK_EVENT_NAME:"mark",MARKING_EVENT_NAME:"marking",MARKED_EVENT_NAME:"marked",TIE_EVENT_NAME:"tie",RESET_EVENT_NAME:"reset",RESET_BOARD_EVENT_NAME:"resetboard",RESTART_EVENT_NAME:"restart",COMPUTER_TURN_EVENT_NAME:"computerturn",USER_TURN_EVENT_NAME:"userturn"};function e(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}var r=function(){var t,n,r,i,o,E=Array(9),a=[];function u(){E.fill("",0),a.splice(0),clearTimeout(n),r=!1}function c(t){return t[0]&&t[0]===t[1]&&t[1]===t[2]||t[3]&&t[3]===t[4]&&t[4]===t[5]||t[6]&&t[6]===t[7]&&t[7]===t[8]||t[0]&&t[0]===t[3]&&t[3]===t[6]||t[1]&&t[1]===t[4]&&t[4]===t[7]||t[2]&&t[2]===t[5]&&t[5]===t[8]||t[0]&&t[0]===t[4]&&t[4]===t[8]||t[6]&&t[6]===t[4]&&t[4]===t[2]}function d(){for(var t=0;t<E.length;t++)if(!E[t])return!0}function l(n,e){r=!1;var i=function(t){var n=Number(t);return Number.isInteger(n)&&n>=0&&n<9?n:-1}(n);i>-1&&d()&&function(t){return!E[t]}(i)&&(E[i]=e,a.push(i),function(n){c(E)?t.emit(t.WIN_EVENT_NAME,n):d()||t.emit(t.TIE_EVENT_NAME)}(e),t.emit(t.MARKED_EVENT_NAME,i,e))}function N(){var t;do{t=Math.floor(9*Math.random())}while(a.includes(t));return t}function _(){if(!a.includes(4))return 4;for(var t=function(t){for(var n=function(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,n){if(t){if("string"==typeof t)return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}([0,2,6,8]),r=n.length-1;r>0;r--){var i=Math.floor(Math.random()*(r+1)),o=[n[i],n[r]];n[r]=o[0],n[i]=o[1]}return n}(),n=0;n<t.length;n++)if(!a.includes(t[n]))return t[n];return null}function f(t,n){for(var e=0;e<9;e++)if(!a.includes(e)){var r=t[e];if(t[e]=n,c(t))return e;t[e]=r}return null}function A(e,u){var c;c=i||o?function(t,n){var e,r,o,a,u,c=[].concat(E);return i?null!==(e=null!==(r=null!==(o=f(c,t))&&void 0!==o?o:f(c,n))&&void 0!==r?r:_())&&void 0!==e?e:N():null!==(a=null!==(u=f(c,t))&&void 0!==u?u:f(c,n))&&void 0!==a?a:N()}(e,u):function(t,n){var e,r,i=[].concat(E),o=Math.floor(2*Math.random())+2;return null!==(e=null!==(r=f(i,t))&&void 0!==r?r:a.length%o==0?f(i,n):null)&&void 0!==e?e:N()}(e,u),n=setTimeout((function(){l(c,e),t.emit(t.MARKED_EVENT_NAME,c,e),t.emit(t.USER_TURN_EVENT_NAME)}),r?1500:1e3)}function T(t,n){l(t,n)}function v(){u()}function M(){r=!0}function s(){i=!0}function p(){o=!0}function m(){}return{init:function(n){t=n,i=!1,o=!1,u(),t.add(t.RESET_BOARD_EVENT_NAME,v),t.add(t.START_EVENT_NAME,M),t.add(t.HARD_GAME_EVENT_NAME,s),t.add(t.MEDIUM_GAME_EVENT_NAME,p),t.add(t.EASY_GAME_EVENT_NAME,m),t.add(t.COMPUTER_TURN_EVENT_NAME,A),t.add(t.MARKING_EVENT_NAME,T)}}}();function i(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,n){if(t){if("string"==typeof t)return o(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?o(t,n):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}var E=function(){var t,n,e,r,o,E,a,u,c=document.createElement("dialog"),d=[];function l(t){t.setAttribute("style","opacity: 0; transform: scale(75%);")}function N(t){setTimeout((function(){t.setAttribute("style","opacity: 1; transform: scale(100%);"),t.removeAttribute("style")}),200)}function _(t,n,e,r){var i=document.createElement(t);if(n&&(i.className=n),e&&(i.textContent=e),Array.isArray(r)&&r.length>0)for(var o=0;o<r.length;o++)Array.isArray(r[o])&&2===r[o].length&&i.setAttribute(r[o][0],r[o][1]);return i}function f(){l(n),document.body.appendChild(n),N(n)}function A(t,n,e){for(var r=[],i=0;i<n.length;i++)r[i]=_("button",t,n[i],[["type","button"],["value",n[i].slice(0,1).toLowerCase()]]),r[i].addEventListener("click",e);return r}function T(t){c.children.length>0&&i(c.children).forEach((function(t){return t.remove()}));var n=_("div","dialog-content");n.append.apply(n,i(t)),c.appendChild(n)}function v(){document.body.appendChild(c),l(c),c.showModal(),N(c)}function M(){c.close(),setTimeout((function(){return c.remove()}),500)}function s(t){var n=_("button","dialog-close circle-btn","x",[["type","button"]]);n.addEventListener("click",M),T([n,_("div","message",t)]),setTimeout(v,500)}function p(n){var r=Number(n.target.value);t.emit(t.START_EVENT_NAME,r),e.textContent=1===r?"1 Player":"2 Players"}function m(){d.forEach((function(t){return t.textContent=""}))}function y(n){1===n?T(A("players-type-choice",["X","O"],(function(n){var e;e=n.target.value,T(A("difficulty-level",["Easy","Medium","Hard"],(function(n){var r=n.target.value;M(),f(),t.emit(t.ONE_PLAYER_GAME_EVENT_NAME,e,r)})))}))):(M(),f())}function V(t){a.textContent=t}function R(t,n){d[t].textContent=n,function(t){"x"===t.toLowerCase()?a.textContent="O":a.textContent="X"}(n)}function g(t){if(s(t+" Win!"),"X"===t){var n=Number(r.textContent);r.textContent=n?++n:1}else{var e=Number(o.textContent);o.textContent=e?++e:1}}function h(){s("Tie!");var t=Number(E.textContent);E.textContent=t?++t:1}function b(t){a.textContent=t,m()}function S(){var t=_("span","game-level"," (Hard)");e.appendChild(t)}function C(){var t=_("span","game-level"," (Medium)");e.appendChild(t)}function x(){var t=_("span","game-level"," (Easy)");e.appendChild(t)}return{init:function(i){t=i,n||function(){var i=_("div","settings");e=_("div","players-num","2 Players"),(u=_("button","reset circle-btn","â†º",[["type","button"]])).addEventListener("click",(function(){return t.emit(t.RESET_EVENT_NAME)})),i.append(e,u);var c=_("div","scores"),l=_("div");r=_("span","x-score","0"),l.append(document.createTextNode("X: "),r);var N=_("div");E=_("span","ties","0"),N.append(document.createTextNode("Ties: "),E);var f=_("div");o=_("span","o-score","0"),f.append(document.createTextNode("O: "),o),c.append(l,N,f);var A=_("div","control");A.append(i,c);var T=_("div","player-turn");a=_("span","current-player","X"),T.append(a,document.createTextNode(" Turn"));for(var v=_("div","board-container"),M=function(n){var e=_("div","board-cell");e.addEventListener("click",(function(){t.emit(t.MARK_EVENT_NAME,n)})),v.appendChild(e),d.push(e)},s=0;s<9;s++)M(s);v.append(_("div","horizontal-divider first-h-div"),_("div","horizontal-divider last-h-div"),_("div","vertical-divider first-v-div"),_("div","vertical-divider last-v-div"));var p=_("div","game");p.append(T,v),(n=_("div","container")).append(A,p)}(),t.add(t.START_EVENT_NAME,y),t.add(t.STARTED_EVENT_NAME,V),t.add(t.WIN_EVENT_NAME,g),t.add(t.TIE_EVENT_NAME,h),t.add(t.MARKED_EVENT_NAME,R),t.add(t.RESET_BOARD_EVENT_NAME,b),t.add(t.HARD_GAME_EVENT_NAME,S),t.add(t.MEDIUM_GAME_EVENT_NAME,C),t.add(t.EASY_GAME_EVENT_NAME,x),e.textContent="1 Player",r.textContent="0",o.textContent="0",E.textContent="0",a.textContent="X",m(),T(A("players-num-choice",["1 Player","2 Players"],p)),v()}}}(),a=function(){var t,n,e,r,i,o,E,a,u,c,d,l,N;function _(t){var n=0;return{getType:function(){return t},getScore:function(){return n},incrementScore:function(){return++n}}}function f(){N++,r=e[N%2]}function A(){d=!1,l=!1,r=e[(N=n)%2],c=!0,a=1===i&&E===r.getType()}function T(n){var e=Number(n);Number.isNaN(e)||(i=e,(u=2===e)&&t.emit(t.STARTED_EVENT_NAME,r.getType()))}function v(n,i){!function(t){if(t.toUpperCase()===e[0].getType()){var n=[e[0].getType(),e[1].getType()];o=n[0],E=n[1]}else{var r=[e[0].getType(),e[1].getType()];E=r[0],o=r[1]}}(n),function(n){"h"===(n=n.toLowerCase())?t.emit(t.HARD_GAME_EVENT_NAME):"m"===n?t.emit(t.MEDIUM_GAME_EVENT_NAME):t.emit(t.EASY_GAME_EVENT_NAME)}(i),(a=E===r.getType())&&t.emit(t.COMPUTER_TURN_EVENT_NAME,E,o),t.emit(t.STARTED_EVENT_NAME,r.getType()),u=!0}function M(n){!u||a||d||l||t.emit(t.MARKING_EVENT_NAME,n,r.getType())}function s(){f(),1!==i||a||d||l||(t.emit(t.COMPUTER_TURN_EVENT_NAME,E,o),a=!0),c=!1}function p(){a=!1,f()}function m(){n++,d=!0,l=!1}function y(){n++,l=!0,d=!1}function V(){c?t.emit(t.RESTART_EVENT_NAME,r.getType()):(A(),t.emit(t.RESET_BOARD_EVENT_NAME,r.getType()),a&&t.emit(t.COMPUTER_TURN_EVENT_NAME,E,o))}return{init:function(a){t=a,n=0,e=[_("X"),_("O")],r=e[0],i=0,o=null,E=null,u=!1,A(),t.add(t.START_EVENT_NAME,T),t.add(t.ONE_PLAYER_GAME_EVENT_NAME,v),t.add(t.MARK_EVENT_NAME,M),t.add(t.MARKED_EVENT_NAME,s),t.add(t.WIN_EVENT_NAME,m),t.add(t.TIE_EVENT_NAME,y),t.add(t.RESET_EVENT_NAME,V),t.add(t.USER_TURN_EVENT_NAME,p)}}}();!function t(){n.init(),n.add(n.RESTART_EVENT_NAME,t),r.init(n),a.init(n),E.init(n)}()}();
//# sourceMappingURL=odin-tic-tac-toe.d6b98d671785d3cf73f2.bundle.js.map